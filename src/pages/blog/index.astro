---
import { SITE } from "@/config";
import Articles from "@/components/blog/articles.astro";
import { getSortedArticles, getPageNumbers } from "@/lib/utils";

import { getCollection } from "astro:content";

const articles = await getCollection("blog");

const sortedArticles = getSortedArticles(articles);

const totalPages = getPageNumbers(sortedArticles.length);

const paginatedArticles = sortedArticles.slice(0, SITE.postPerPage);
---

<Articles
  articles={paginatedArticles}
  pageNum={1}
  totalPages={totalPages.length}
/>
